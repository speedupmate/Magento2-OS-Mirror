<?php
/**
 * Refer to LICENSE.txt distributed with the Temando Shipping module for notice of license
 */
?>
<?php /** @var \Temando\Shipping\Block\Adminhtml\Configuration\CheckoutFieldsComponent $block */ ?>
<div id="temando-componentry"
     data-bind="scope:'temando-componentry'"
     data-component-init='[
     {
        "entrypoint":"CheckoutFieldsForm",
        "assetsUrl":"<?php echo $block->escapeUrl($block->getAssetsUrl());?>",
        "elements": {
            "m2PageActionsButtonsId": "temando-page-actions-buttons"
        },
        "data": {
            "configurationPageUrl": "<?php echo $block->escapeUrl($block->getConfigurationPageUrl()); ?>",
            "ipAddress": "<?php echo $block->escapeHtml($block->getIpAddress()); ?>",
            "lang": "<?php echo $block->escapeHtml($block->getLanguage()); ?>",
            "locale": "<?php echo $block->escapeHtml($block->getLocale()) ?>",
            "m2ApiAccessToken": "<?php echo $block->escapeHtml($block->getAccessToken()); ?>",
            "m2ApiUpdateCheckoutFieldsEndpoint": "<?php echo $block->escapeUrl($block->getUpdateCheckoutFieldEndpoint()); ?>",
            "m2ApiTemandoTokenRefreshEndpoint": "<?php echo $block->escapeUrl($block->getApiTokenRefreshEndpoint()); ?>",
            "m2ApiFormKey": "<?php echo $block->escapeHtml($block->getFormKey()); ?>",
            "m2CheckoutFieldsData": {"fields": <?php echo /* @noEscape */ $block->getCheckoutFieldsData(); ?> },
            "temandoApiEndpoint" : "<?php echo $block->escapeUrl($block->getApiEndpoint()); ?>",
            "temandoApiToken" : "<?php echo $block->escapeHtml($block->getApiToken()); ?>",
            "temandoApiTokenTtl" : "<?php echo $block->escapeHtml($block->getApiTokenExpiry()); ?>",
            "m2ApiAccessTokenTtl" : <?php echo /* @noEscape */ $block->getSessionExpirationTime(); ?>
        }
     }]'
>
    <!-- ko template: getTemplate() --><!-- /ko -->
    <script type="text/x-magento-init">
    {
        "#temando-componentry": {
            "Magento_Ui/js/core/app":  <?php /* @noEscape */ echo $block->getJsLayout(); ?>
        }
    }
    </script>
</div>
