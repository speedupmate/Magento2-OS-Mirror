<?php
/**
 * @author    Blue Acorn iCi <code@blueacornici.com>
 * @copyright 2021 Vertex, Inc. All Rights Reserved.
 */
/**
 * @todo Move json_encode to DI'd json encoder through viewModel once minimum version is 2.2+
 * @var Magento\Framework\Escaper $escaper
 * @var Magento\Framework\View\Element\Messages $block
 * @var Magento\Framework\View\Helper\SecureHtmlRenderer $secureRenderer
 */
$json = [
    'Vertex_Tax/js/messages' => [
        'messageObject' => [
            'messages' => $block->getGroupedHtml()
        ]
    ]
];
$encoded = json_encode($json);
$js = 'jQuery("#order-view-messages").trigger("contentUpdated")';
?>
<div id="order-view-messages"
     data-mage-init="<?= $escaper->escapeHtmlAttr($encoded) ?>"></div>
<?= /* @noEscape */ $secureRenderer->renderTag('script', [], $js, false) ?>
